import{R as e}from"./ui-D8LD_x7b.js";import{g as n}from"./vendor-eVk5PToZ.js";var t,r="clover",o="https://js.stripe.com",c="".concat(o,"/").concat(r,"/stripe.js"),u=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,a=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,i=function(e){return u.test(e)||a.test(e)},s=function(e){var n=document.createElement("script");n.src="".concat(c).concat("");var t=document.head||document.body;if(!t)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return t.appendChild(n),n},l=null,f=null,p=null,d=function(e){return null!==l?l:(l=new Promise(function(n,t){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe)n(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(o,'"]')),n=0;n<e.length;n++){var t=e[n];if(i(t.src))return t}return null}();if(r&&e);else if(r){if(r&&null!==p&&null!==f){var c;r.removeEventListener("load",p),r.removeEventListener("error",f),null===(c=r.parentNode)||void 0===c||c.removeChild(r),r=s()}}else r=s();p=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}}(n,t),f=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}}(t),r.addEventListener("load",p),r.addEventListener("error",f)}catch(u){return void t(u)}else n(null)})).catch(function(e){return l=null,Promise.reject(e)})},m=function(){return t||(t=d(null).catch(function(e){return t=null,Promise.reject(e)}))};Promise.resolve().then(function(){return m()}).catch(function(e){});var y,h,v,b,g,E=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];0;var r=Date.now();return m().then(function(e){return function(e,n,t){if(null===e)return null;n[0].match(/^pk_test/),e.version;var r=e.apply(void 0,n);return function(e,n){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"8.6.0",startTime:n})}(r,t),r}(e,n,r)})},w={exports:{}};function O(){if(h)return y;h=1;return y="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}function j(){if(b)return v;b=1;var e=O();function n(){}function t(){}return t.resetWarningCache=n,v=function(){function r(n,t,r,o,c,u){if(u!==e){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function o(){return r}r.isRequired=r;var c={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:n};return c.PropTypes=c,c}}function S(){return g||(g=1,w.exports=j()()),w.exports}const C=n(S());function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach(function(n){A(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function R(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function T(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==t)return;var r,o,c=[],u=!0,a=!1;try{for(t=t.call(e);!(u=(r=t.next()).done)&&(c.push(r.value),!n||c.length!==n);u=!0);}catch(i){a=!0,o=i}finally{try{u||null==t.return||t.return()}finally{if(a)throw o}}return c}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return N(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return N(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var _=function(n,t,r){var o=!!r,c=e.useRef(r);e.useEffect(function(){c.current=r},[r]),e.useEffect(function(){if(!o||!n)return function(){};var e=function(){c.current&&c.current.apply(c,arguments)};return n.on(t,e),function(){n.off(t,e)}},[o,t,n,c])},I=function(e){return null!==e&&"object"===x(e)},L="[object Object]",q=function e(n,t){if(!I(n)||!I(t))return n===t;var r=Array.isArray(n);if(r!==Array.isArray(t))return!1;var o=Object.prototype.toString.call(n)===L;if(o!==(Object.prototype.toString.call(t)===L))return!1;if(!o&&!r)return n===t;var c=Object.keys(n),u=Object.keys(t);if(c.length!==u.length)return!1;for(var a={},i=0;i<c.length;i+=1)a[c[i]]=!0;for(var s=0;s<u.length;s+=1)a[u[s]]=!0;var l=Object.keys(a);if(l.length!==c.length)return!1;var f=n,p=t;return l.every(function(n){return e(f[n],p[n])})},D=function(e,n,t){return I(e)?Object.keys(e).reduce(function(r,o){var c=!I(n)||!q(e[o],n[o]);return t.includes(o)?r:c?P(P({},r||{}),{},A({},o,e[o])):r},null):null},M=e.createContext(null);M.displayName="ElementsContext";C.any,C.object,C.func.isRequired;var B=e.createContext(null);B.displayName="CheckoutContext",C.any,C.shape({clientSecret:C.oneOfType([C.string,C.instanceOf(Promise)]).isRequired,elementsOptions:C.object}).isRequired;var F=function(n){var t=e.useContext(B),r=e.useContext(M);if(t){if(r)throw new Error("You cannot wrap the part of your app that ".concat(n," in both <CheckoutProvider> and <Elements> providers."));return t}return function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e}(r,n)},U=["mode"],W=function(n,t){var r,o="".concat((r=n).charAt(0).toUpperCase()+r.slice(1),"Element"),c=t?function(n){F("mounts <".concat(o,">"));var t=n.id,r=n.className;return e.createElement("div",{id:t,className:r})}:function(t){var r,c=t.id,u=t.className,a=t.options,i=void 0===a?{}:a,s=t.onBlur,l=t.onFocus,f=t.onReady,p=t.onChange,d=t.onEscape,m=t.onClick,y=t.onLoadError,h=t.onLoaderStart,v=t.onNetworksChange,b=t.onConfirm,g=t.onCancel,E=t.onShippingAddressChange,w=t.onShippingRateChange,O=t.onSavedPaymentMethodRemove,j=t.onSavedPaymentMethodUpdate,S=F("mounts <".concat(o,">")),C="elements"in S?S.elements:null,k="checkoutState"in S?S.checkoutState:null,P="success"===(null==k?void 0:k.type)||"loading"===(null==k?void 0:k.type)?k.sdk:null,x=T(e.useState(null),2),A=x[0],N=x[1],I=e.useRef(null),L=e.useRef(null);_(A,"blur",s),_(A,"focus",l),_(A,"escape",d),_(A,"click",m),_(A,"loaderror",y),_(A,"loaderstart",h),_(A,"networkschange",v),_(A,"confirm",b),_(A,"cancel",g),_(A,"shippingaddresschange",E),_(A,"shippingratechange",w),_(A,"savedpaymentmethodremove",O),_(A,"savedpaymentmethodupdate",j),_(A,"change",p),f&&(r="expressCheckout"===n?f:function(){f(A)}),_(A,"ready",r),e.useLayoutEffect(function(){if(null===I.current&&null!==L.current&&(C||P)){var e=null;if(P)switch(n){case"paymentForm":e=P.createPaymentFormElement();break;case"payment":e=P.createPaymentElement(i);break;case"address":if(!("mode"in i))throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");var t=i.mode,r=R(i,U);if("shipping"===t)e=P.createShippingAddressElement(r);else{if("billing"!==t)throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.");e=P.createBillingAddressElement(r)}break;case"expressCheckout":e=P.createExpressCheckoutElement(i);break;case"currencySelector":e=P.createCurrencySelectorElement();break;case"taxId":e=P.createTaxIdElement(i);break;default:throw new Error("Invalid Element type ".concat(o,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else C&&(e=C.create(n,i));I.current=e,N(e),e&&e.mount(L.current)}},[C,P,i]);var q,M,B=(q=i,M=e.useRef(q),e.useEffect(function(){M.current=q},[q]),M.current);return e.useEffect(function(){if(I.current){var e=D(i,B,["paymentRequest"]);e&&"update"in I.current&&I.current.update(e)}},[i,B]),e.useLayoutEffect(function(){return function(){if(I.current&&"function"==typeof I.current.destroy)try{I.current.destroy(),I.current=null}catch(e){}}},[]),e.createElement("div",{id:c,className:u,ref:L})};return c.propTypes={id:C.string,className:C.string,onChange:C.func,onBlur:C.func,onFocus:C.func,onReady:C.func,onEscape:C.func,onClick:C.func,onLoadError:C.func,onLoaderStart:C.func,onNetworksChange:C.func,onConfirm:C.func,onCancel:C.func,onShippingAddressChange:C.func,onShippingRateChange:C.func,onSavedPaymentMethodRemove:C.func,onSavedPaymentMethodUpdate:C.func,options:C.object},c.displayName=o,c.__elementType=n,c},Y="undefined"==typeof window;e.createContext(null).displayName="EmbeddedCheckoutProviderContext",W("auBankAccount",Y),W("card",Y),W("cardNumber",Y),W("cardExpiry",Y),W("cardCvc",Y),W("iban",Y),W("payment",Y),W("expressCheckout",Y),W("paymentRequestButton",Y),W("linkAuthentication",Y),W("address",Y),W("shippingAddress",Y),W("paymentMethodMessaging",Y),W("taxId",Y);export{C as P,E as l};
